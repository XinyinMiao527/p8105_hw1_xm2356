---
title: "p8105_hw1_xm2356"
author: "Xinyin Miao (xm2356)"
date: "2025-09-12"
output: 
  github_document:
    toc: true
    toc_depth: 2
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(moderndive)
library(tidyverse)
```

# Problem 1

## Dataset description

```{r}
data("early_january_weather")
```

The dataset has `r nrow(early_january_weather)` rows and `r ncol(early_january_weather)` columns.
The mean temperature is approximately `r round(mean(early_january_weather$temp, na.rm = TRUE), 2)`.
Variables include: `r paste(names(early_january_weather), collapse = ", ")`.


## Scatterplot
```{r}
p_temp_time <- ggplot(early_january_weather,
                      aes(x = time_hour, y = temp, color = humid)) +
  geom_point(alpha = 0.8) +
  labs(title = "Temperature vs Time (colored by humidity)",
       x = "time_hour",
       y = "Temperature",
       color = "humid") +
  theme_minimal()

p_temp_time
```

From the scatterplot, temperature shows a clear daily cycle: it tends to be
lowest in the early morning and highest in the afternoon.  
Humidity is higher when the temperature is lower, and drops as the day warms.  


## Export the plot
```{r}
ggsave("temp_vs_time.png", plot = p_temp_time, width = 7, height = 4)
```


# Problem 2

## Create a data frame
It involves four types of variables and explore means.

```{r}
set.seed(123)
sample_numeric <-  rnorm(10)
sample_logical <-  sample_numeric > 0
sample_character <-  c("apple", "banana", "fish", "dog", "cat", "man", "woman", "book", "store", "test")
sample_factor <- factor(sample(c("low", "medium", "high"), size = 10, replace = TRUE), levels = c("low", "medium", "high"))

library(tibble)
df_types <- tibble(
  number = sample_numeric, 
  is_positive = sample_logical,
  label = sample_character,
  group = sample_factor
)

df_types
```

## Mean of each variable

```{r}
mean(df_types %>% pull(number))
mean(df_types %>% pull(is_positive))
mean(df_types %>% pull(label))  # Error: character vectors have no mean
mean(df_types %>% pull(group)) # Error: Factors can not be averaged directly

```

## Use as.numeric()

```{r echo = TRUE, results = 'hide', warning = FALSE, message=FALSE}
as.numeric(df_types$is_positive)
as.numeric(df_types$label)
as.numeric(df_types$group)
```

## Explanation

For is_positive (logical), as.numeric() converts TRUE to 1 and FALSE to 0.
This explains why mean() works directly on logical variables: it is actually calculating the proportion of TRUE values.
For label (character), as.numeric() returns NA with a warning, because R cannot interpret arbitrary strings (e.g., "apple", "dog") as numbers.
For group (factor), as.numeric() returns the internal integer codes of the factor levels, not their text labels.
To get numeric values corresponding to the labels themselves, you would first convert to character and then to numeric, e.g. as.numeric(as.character(group)).
Overall, mean() only works for variables that are numeric or can be implicitly converted to numeric (such as logical). Character vectors and raw factors cannot be averaged unless they are transformed into meaningful numeric values first.










